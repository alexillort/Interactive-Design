<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Índice Dinámico de Archivos (GitLab)</title>
</head>
<body>
    <h1>Mis Documentos HTML (generado desde GitLab)</h1>
    <ul id="lista-html">
        </ul>

    <script>
        // 1. Reemplaza con el ID de tu proyecto de GitLab
        const projectId = "TU_ID_DE_PROYECTO"; 

        // 2. URL de la API de GitLab para obtener el árbol de archivos del repositorio
        // El parámetro `?recursive=true` busca en todas las carpetas
        const urlApi = `https://gitlab.com/api/v4/projects/${projectId}/repository/tree?recursive=true`;

        fetch(urlApi)
            .then(response => response.json())
            .then(data => {
                const lista = document.getElementById('lista-html');
                
                // 3. Filtramos para mostrar solo archivos .html
                data.forEach(item => {
                    // Verificamos que sea un archivo (type: 'blob') y que termine en .html
                    if (item.type === 'blob' && item.path.endsWith('.html') && item.name !== 'index.html') {
                        const listItem = document.createElement('li');
                        const link = document.createElement('a');
                        
                        // item.path ya contiene la ruta completa dentro del repo
                        link.href = item.path; 
                        link.textContent = item.path;
                        
                        listItem.appendChild(link);
                        lista.appendChild(listItem);
                    }
                });
            })
            .catch(error => console.error('Error al consultar la API de GitLab:', error));
    </script>
</body>
</html>
